<!doctype html>
<html>
<head>
	<title>Socket.IO chat</title>
</head>
<body>
</body>
<script src="/socket.io/socket.io.js"></script>
<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
<script>
	var socket = io(),
		_salsaId;

	// Socket IO
	socket.on('connect', onConnect);
	socket.on('connect_error', onConnectError);
	socket.on('connect_timeout', onConnectTimeout);
	socket.on('reconnect', onReconnect);
	socket.on('reconnect_attempt', onReconnectAttempt);
	socket.on('reconnecting', onReconnecting);
	socket.on('reconnect_error', onReconnectError);
	socket.on('reconnect_failed', onReconnectFailed);

	socket.on('salsaConnectedAs', onSalsaConnectedAs);

	window.rotate = function(angle) {

		console.log('rotate', angle);
		socket.emit('rotate', angle);
	};

	/**
	 * Fired upon successful Salsa connection
	 * @param {String} id
	 */
	function onSalsaConnectedAs(id) {

		console.log('onSalsaConnectedAs', id);
		_salsaId = id;
	}

	/**
	 * Fired upon a successful reconnection
	 * @param {Number} reconnectionAttemptNumber
	 */
	function onReconnect(reconnectionAttemptNumber) {
		console.log('onReconnect - reconnectionAttemptNumber', reconnectionAttemptNumber);
	}

	/**
	 * Fired upon an attempt to reconnect
	 */
	function onReconnectAttempt() {
		console.log('onReconnectAttempt');
	}

	/**
	 * Fired upon an attempt to reconnect
	 * @param {Number} reconnectionAttemptNumber
	 */
	function onReconnecting(reconnectionAttemptNumber) {
		console.log('onReconnecting - reconnectionAttemptNumber', reconnectionAttemptNumber);
	}

	/**
	 * Fired upon a reconnection attempt error
	 * @param {Object} error
	 */
	function onReconnectError(error) {
		console.log('onReconnectError - error', error);
	}

	/**
	 * Fired when couldnâ€™t reconnect within `reconnectionAttempts`
	 */
	function onReconnectFailed() {
		console.log('onReconnectFailed');
	}

	/**
	 * Fired upon a successful connection
	 */
	function onConnect() {

		console.log('onConnect');
		socket.emit('connectSalsa');
	}

	/**
	 * Fired upon a connection error
	 * @param {Object} error
	 */
	function onConnectError(error) {
		console.log('onConnectError - error', error);
	}

	/**
	 * Fired upon a connection timeout
	 */
	function onConnectTimeout() {
		console.log('onConnectTimeout');
	}
	
	
</script>
</html>
